The pyrealm package
====================

These are development notes for the package, user documentation can be found at:

https://pyrealm.readthedocs.io/en/develop/pmodel.html


## Overview

This a Python 3 package intended to provide a common framework for a number of
related models of plant productivity, growth and demography.


## Documentation

The `pyrealm` package is documented using `sphinx`. In general, the
documentation is written using  reStructuredText (`.rst`) format. The code is
documented using [Google
style](https://sphinxcontrib-napoleon.readthedocs.io/en/latest/example_google.html).

Equations in the documentation are supported using the `sphinx.ext.mathjax` 
extension and this has been configured to also support 

The docstrings are formatted using `.rst`, which is better supported, but some
of the documentation files use `markdown` via the `recommonmark` extension to 
`sphinx`. A contributed package is used for bibliographic management.

```bash
pip install sphinx sphinx-material recommonmark sphinxcontrib-bibtex
```

To build the documentation, use `make` in the package root, which will use the 
`Makefile` created by `sphinx-quickstart`.

```bash
make html
```

## Developer installation

Use the local directory as an editable installation of the package

```
pip install -e .
```

## Testing

### Using `doctest`

The package docstrings contain `doctest` examples of code use. These are 
intended to demonstrate use and to validate simple scalar inputs against
the R implementation in `rpmodel`.

To run the docstring tests, use:

```bash
python -m doctest pyrealm/pmodel.py

```

### Using `pytest`

The `test` directory contains `pytest` testing to provide greater testing of
different input combinations (scalars and arrays) and to check errors are
raised correctly.

## Bibliography

TODO - it would be nice to have the bibliographies autogenerated and 
sphinxcontrib-bibtex does this but in a kinda ugly way:

https://github.com/executablebooks/jupyter-book/issues/1090
